{"version":3,"sources":["webpack:///./src/components/user/Users.vue?c8e0","webpack:///src/components/user/Users.vue","webpack:///./src/components/user/Users.vue?50f7","webpack:///./src/components/user/Users.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","_v","on","getUserList","model","value","queryInfo","callback","$$v","$set","expression","slot","$event","addDialogVisible","userslist","scopedSlots","_u","key","fn","scope","change","row","showEditDialog","id","deleteByUserId","staticClass","setRole","pagenum","pagesize","total","handleSizeChange","handleCurrentChange","addFormClose","ref","addForm","addFormRules","addUser","editDialogVisible","editDialogClose","editForm","editFormRules","editUserInfo","roleDialogVisible","_s","userInfo","username","role_name","selectedRoleId","_l","item","roleName","saveRole","staticRenderFns","created","data","checkEmail","regEmail","test","Error","checkMobile","regMobile","query","password","email","mobile","rolesList","methods","console","log","newSize","newPage","$refs","addFormRef","resetFields","validate","editFormRef","$confirm","confirmButtonText","cancelButtonText","type","component"],"mappings":"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","file":"js/users.48713cc4.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":\"/home\"}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"用户管理\")]),_c('el-breadcrumb-item',[_vm._v(\"用户列表\")])],1),_c('el-card',[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":10}},[_c('el-input',{attrs:{\"placeholder\":\"请输入内容\",\"clearable\":\"\"},on:{\"clear\":_vm.getUserList},model:{value:(_vm.queryInfo.query),callback:function ($$v) {_vm.$set(_vm.queryInfo, \"query\", $$v)},expression:\"queryInfo.query\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.getUserList},slot:\"append\"})],1)],1),_c('el-col',{attrs:{\"span\":14}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.addDialogVisible=true}}},[_vm._v(\"添加用户\")])],1)],1),_c('el-table',{attrs:{\"data\":_vm.userslist,\"border\":\"\",\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"index\"}}),_c('el-table-column',{attrs:{\"label\":\"姓名\",\"prop\":\"username\",\"width\":\"80px\"}}),_c('el-table-column',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}}),_c('el-table-column',{attrs:{\"label\":\"电话\",\"prop\":\"mobile\"}}),_c('el-table-column',{attrs:{\"label\":\"角色\",\"prop\":\"role_name\"}}),_c('el-table-column',{attrs:{\"label\":\"状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-switch',{on:{\"change\":function($event){return _vm.change(scope.row)}},model:{value:(scope.row.mg_state),callback:function ($$v) {_vm.$set(scope.row, \"mg_state\", $$v)},expression:\"scope.row.mg_state\"}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"260px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.showEditDialog(scope.row.id)}}}),_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.deleteByUserId(scope.row.id)}}}),_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":\"分配角色\",\"placement\":\"top\",\"enterable\":false}},[_c('el-button',{attrs:{\"type\":\"warning\",\"icon\":\"el-icon-setting\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.setRole(scope.row)}}})],1)]}}])})],1),_c('el-pagination',{attrs:{\"current-page\":_vm.queryInfo.pagenum,\"page-sizes\":[1,2,3,4],\"page-size\":_vm.queryInfo.pagesize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1),_c('el-dialog',{attrs:{\"title\":\"添加用户\",\"visible\":_vm.addDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.addDialogVisible=$event},\"close\":_vm.addFormClose}},[_c('el-form',{ref:\"addFormRef\",attrs:{\"model\":_vm.addForm,\"rules\":_vm.addFormRules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名\",\"prop\":\"username\"}},[_c('el-input',{model:{value:(_vm.addForm.username),callback:function ($$v) {_vm.$set(_vm.addForm, \"username\", $$v)},expression:\"addForm.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"密码\",\"prop\":\"password\"}},[_c('el-input',{model:{value:(_vm.addForm.password),callback:function ($$v) {_vm.$set(_vm.addForm, \"password\", $$v)},expression:\"addForm.password\"}})],1),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}},[_c('el-input',{model:{value:(_vm.addForm.email),callback:function ($$v) {_vm.$set(_vm.addForm, \"email\", $$v)},expression:\"addForm.email\"}})],1),_c('el-form-item',{attrs:{\"label\":\"手机\",\"prop\":\"mobile\"}},[_c('el-input',{model:{value:(_vm.addForm.mobile),callback:function ($$v) {_vm.$set(_vm.addForm, \"mobile\", $$v)},expression:\"addForm.mobile\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.addDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addUser}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"修改用户\",\"visible\":_vm.editDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.editDialogVisible=$event},\"close\":_vm.editDialogClose}},[_c('el-form',{ref:\"editFormRef\",attrs:{\"model\":_vm.editForm,\"rules\":_vm.editFormRules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名\",\"prop\":\"username\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.editForm.username),callback:function ($$v) {_vm.$set(_vm.editForm, \"username\", $$v)},expression:\"editForm.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}},[_c('el-input',{model:{value:(_vm.editForm.email),callback:function ($$v) {_vm.$set(_vm.editForm, \"email\", $$v)},expression:\"editForm.email\"}})],1),_c('el-form-item',{attrs:{\"label\":\"手机\",\"prop\":\"mobile\"}},[_c('el-input',{model:{value:(_vm.editForm.mobile),callback:function ($$v) {_vm.$set(_vm.editForm, \"mobile\", $$v)},expression:\"editForm.mobile\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.editDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.editUserInfo}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"提示\",\"visible\":_vm.roleDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.roleDialogVisible=$event}}},[_c('p',[_vm._v(\"用户名：\"+_vm._s(_vm.userInfo.username))]),_c('p',[_vm._v(\"当前的角色：\"+_vm._s(_vm.userInfo.role_name))]),_c('p',[_vm._v(\" 切换新的角色: \"),_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.selectedRoleId),callback:function ($$v) {_vm.selectedRoleId=$$v},expression:\"selectedRoleId\"}},_vm._l((_vm.rolesList),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.roleName,\"value\":item.id}})}),1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.roleDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.saveRole}},[_vm._v(\"确 定\")])],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item to=\"/home\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>用户管理</el-breadcrumb-item>\r\n      <el-breadcrumb-item>用户列表</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n    <el-card>\r\n      <!-- 2 3 4\r\n      栅格 bootstrap 12列\r\n      element ui 栅格 24-->\r\n      <el-row :gutter=\"20\">\r\n        <el-col :span=\"10\">\r\n          <el-input placeholder=\"请输入内容\" v-model=\"queryInfo.query\" clearable @clear=\"getUserList\">\r\n            <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"getUserList\"></el-button>\r\n          </el-input>\r\n        </el-col>\r\n        <el-col :span=\"14\">\r\n          <el-button type=\"primary\" @click=\"addDialogVisible=true\">添加用户</el-button>\r\n        </el-col>\r\n      </el-row>\r\n      <el-table :data=\"userslist\" border stripe>\r\n        <el-table-column type=\"index\"></el-table-column>\r\n        <el-table-column label=\"姓名\" prop=\"username\" width=\"80px\"></el-table-column>\r\n        <el-table-column label=\"邮箱\" prop=\"email\"></el-table-column>\r\n        <el-table-column label=\"电话\" prop=\"mobile\"></el-table-column>\r\n        <el-table-column label=\"角色\" prop=\"role_name\"></el-table-column>\r\n        <!-- 如果是布尔值，显示不出来的 -->\r\n        <el-table-column label=\"状态\">\r\n          <template slot-scope=\"scope\">\r\n            <el-switch v-model=\"scope.row.mg_state\" @change=\"change(scope.row)\"></el-switch>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\" width=\"260px\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button\r\n              type=\"primary\"\r\n              icon=\"el-icon-edit\"\r\n              size=\"mini\"\r\n              @click=\"showEditDialog(scope.row.id)\"\r\n            ></el-button>\r\n            <el-button\r\n              type=\"danger\"\r\n              icon=\"el-icon-delete\"\r\n              size=\"mini\"\r\n              @click=\"deleteByUserId(scope.row.id)\"\r\n            ></el-button>\r\n            <el-tooltip\r\n              class=\"item\"\r\n              effect=\"dark\"\r\n              content=\"分配角色\"\r\n              placement=\"top\"\r\n              :enterable=\"false\"\r\n            >\r\n              <el-button\r\n                type=\"warning\"\r\n                icon=\"el-icon-setting\"\r\n                size=\"mini\"\r\n                @click=\"setRole(scope.row)\"\r\n              ></el-button>\r\n            </el-tooltip>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <!-- size-change 设置每一页条数\r\n      current-change 设置当前是第几页\r\n      page-sizes 这个是一个显示列表，可以让设置每一页条数是几条\r\n      page-size 当前页的数据条数\r\n      layout-->\r\n      <el-pagination\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page=\"queryInfo.pagenum\"\r\n        :page-sizes=\"[1,2,3,4]\"\r\n        :page-size=\"queryInfo.pagesize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"total\"\r\n      ></el-pagination>\r\n    </el-card>\r\n\r\n    <!-- 添加用户对话框 -->\r\n    <el-dialog title=\"添加用户\" :visible.sync=\"addDialogVisible\" width=\"50%\" @close=\"addFormClose\">\r\n      <el-form :model=\"addForm\" :rules=\"addFormRules\" ref=\"addFormRef\" label-width=\"100px\">\r\n        <el-form-item label=\"用户名\" prop=\"username\">\r\n          <el-input v-model=\"addForm.username\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"密码\" prop=\"password\">\r\n          <el-input v-model=\"addForm.password\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"邮箱\" prop=\"email\">\r\n          <el-input v-model=\"addForm.email\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"手机\" prop=\"mobile\">\r\n          <el-input v-model=\"addForm.mobile\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"addDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"addUser\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n\r\n    <!-- 修改用户对话框 -->\r\n    <el-dialog title=\"修改用户\" :visible.sync=\"editDialogVisible\" width=\"50%\" @close=\"editDialogClose\">\r\n      <el-form :model=\"editForm\" :rules=\"editFormRules\" ref=\"editFormRef\" label-width=\"100px\">\r\n        <el-form-item label=\"用户名\" prop=\"username\">\r\n          <el-input v-model=\"editForm.username\" disabled></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"邮箱\" prop=\"email\">\r\n          <el-input v-model=\"editForm.email\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"手机\" prop=\"mobile\">\r\n          <el-input v-model=\"editForm.mobile\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"editDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"editUserInfo\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n\r\n    <!-- 分配角色的对话框 -->\r\n    <el-dialog title=\"提示\" :visible.sync=\"roleDialogVisible\" width=\"50%\">\r\n      <p>用户名：{{userInfo.username}}</p>\r\n      <p>当前的角色：{{userInfo.role_name}}</p>\r\n      <p>\r\n        切换新的角色:\r\n        <el-select v-model=\"selectedRoleId\" placeholder=\"请选择\">\r\n          <el-option\r\n            v-for=\"item in rolesList\"\r\n            :key=\"item.id\"\r\n            :label=\"item.roleName\"\r\n            :value=\"item.id\"\r\n          ></el-option>\r\n        </el-select>\r\n      </p>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"roleDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"saveRole\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  created() {\r\n    this.getUserList();\r\n  },\r\n  data() {\r\n    //校验邮箱的规则\r\n    var checkEmail = (rule, value, callback) => {\r\n      var regEmail = /^([A-Za-z0-9_\\-\\.])+\\@([A-Za-z0-9_\\-\\.])+\\.([A-Za-z]{2,4})$/;\r\n      if (!regEmail.test(value)) {\r\n        return callback(new Error(\"邮箱不合法\"));\r\n      }\r\n      callback();\r\n    };\r\n\r\n    var checkMobile = (rule, value, callback) => {\r\n      var regMobile = /^1[3|4|5|7|8][0-9]{9}$/;\r\n      if (!regMobile.test(value)) {\r\n        return callback(new Error(\"手机不合法\"));\r\n      }\r\n      callback();\r\n    };\r\n    return {\r\n      queryInfo: {\r\n        query: \"\", //查询关键字\r\n        pagenum: 1, //当前第几页\r\n        pagesize: 2 //每一页数据条数\r\n      },\r\n      userslist: [],\r\n      total: 0, //数据总条数\r\n      addDialogVisible: false,\r\n      addForm: {\r\n        username: \"\",\r\n        password: \"\",\r\n        email: \"\",\r\n        mobile: \"\"\r\n      },\r\n      //校验规则\r\n      addFormRules: {\r\n        username: [\r\n          { required: true, message: \"请输入用户名\", trigger: \"blur\" },\r\n          { min: 3, max: 15, message: \"长度在3到15之间\", trigger: \"blur\" }\r\n        ],\r\n        password: [\r\n          { required: true, message: \"请输入密码\", trigger: \"blur\" },\r\n          { min: 3, max: 15, message: \"长度在3到15之间\", trigger: \"blur\" }\r\n        ],\r\n        email: [\r\n          { required: true, message: \"请输入邮箱\", trigger: \"blur\" },\r\n          { validator: checkEmail, trigger: \"blur\" }\r\n        ],\r\n        mobile: [\r\n          { required: true, message: \"请输入手机号\", trigger: \"blur\" },\r\n          { validator: checkMobile, trigger: \"blur\" }\r\n        ]\r\n      },\r\n      editDialogVisible: false,\r\n      editForm: {},\r\n      editFormRules: {\r\n        username: [\r\n          { required: true, message: \"请输入用户名\", trigger: \"blur\" },\r\n          { min: 3, max: 15, message: \"长度在3到15之间\", trigger: \"blur\" }\r\n        ],\r\n        email: [\r\n          { required: true, message: \"请输入邮箱\", trigger: \"blur\" },\r\n          { validator: checkEmail, trigger: \"blur\" }\r\n        ],\r\n        mobile: [\r\n          { required: true, message: \"请输入手机号\", trigger: \"blur\" },\r\n          { validator: checkMobile, trigger: \"blur\" }\r\n        ]\r\n      },\r\n      roleDialogVisible: false, //默认角色对话框是隐藏的\r\n      userInfo: {}, //用户的信息\r\n      rolesList: [],//所有的角色信息\r\n      selectedRoleId:'',//选中的角色的id值\r\n    };\r\n  },\r\n  methods: {\r\n    async getUserList() {\r\n      // get,delete this.$http.post('url',{params:数据对象})\r\n      // put,post this.$http.post('url',{数据})\r\n      const { data: res } = await this.$http.get(\"users\", {\r\n        params: this.queryInfo\r\n      });\r\n      if (res.meta.status != 200)\r\n        return this.$message.error(\"请求列表数据失败\");\r\n      console.log(res.data);\r\n      this.total = res.data.total;\r\n      this.userslist = res.data.users;\r\n    },\r\n    handleSizeChange(newSize) {\r\n      console.log(newSize);\r\n      this.queryInfo.pagesize = newSize;\r\n      this.getUserList();\r\n    },\r\n    handleCurrentChange(newPage) {\r\n      console.log(newPage);\r\n      this.queryInfo.pagenum = newPage;\r\n      this.getUserList();\r\n    },\r\n    async change(info) {\r\n      const { data: res } = await this.$http.put(\r\n        `users/${info.id}/state/${info.mg_state}`\r\n      );\r\n      console.log(res);\r\n      if (res.meta.status != 200) return this.$message.error(\"修改失败\");\r\n    },\r\n    addFormClose() {\r\n      this.$refs.addFormRef.resetFields();\r\n    },\r\n    addUser() {\r\n      //表单预校验\r\n      this.$refs.addFormRef.validate(async valid => {\r\n        if (!valid) return console.log(\"表单校验失败\");\r\n        console.log(\"表单校验成功\");\r\n        const { data: res } = await this.$http.post(\"users\", this.addForm);\r\n        if (res.meta.status != 201) return this.$message.error(\"添加失败\");\r\n        this.getUserList();\r\n        this.addDialogVisible = false;\r\n      });\r\n    },\r\n    async showEditDialog(id) {\r\n      const { data: res } = await this.$http.get(`users/${id}`);\r\n      if (res.meta.status != 200)\r\n        return this.$message.error(\"获取用户信息失败\");\r\n      this.editForm = res.data;\r\n      this.editDialogVisible = true; //让编辑对话框显示\r\n    },\r\n    editDialogClose() {\r\n      this.$refs.editFormRef.resetFields();\r\n    },\r\n    editUserInfo() {\r\n      //预校验 --> ajax\r\n      this.$refs.editFormRef.validate(async valid => {\r\n        if (!valid) return console.log(\"验证失败\");\r\n        // console.log('验证通过')\r\n        const { data: res } = await this.$http.put(\r\n          `users/${this.editForm.id}`,\r\n          { email: this.editForm.email, mobile: this.editForm.mobile }\r\n        );\r\n        if (res.meta.status != 200) return this.$message.error(\"修改失败\");\r\n        this.editDialogVisible = false;\r\n        this.getUserList();\r\n      });\r\n    },\r\n    deleteByUserId(id) {\r\n      // console.log(id)\r\n      this.$confirm(\"此操作将删除当前用户, 是否继续?\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\"\r\n      })\r\n        .then(async () => {\r\n          const { data: res } = await this.$http.delete(`users/${id}`);\r\n          if (res.meta.status != 200) return this.$message.error(\"修改失败\");\r\n          this.$message.success(\"删除成功\");\r\n          this.queryInfo.pagenum = 1; //解决一个删除最后一页的小bug\r\n          this.getUserList();\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: \"info\",\r\n            message: \"已取消删除\"\r\n          });\r\n        });\r\n    },\r\n    async setRole(userInfo) {\r\n      console.log(userInfo);\r\n      this.roleDialogVisible = true;\r\n      this.userInfo = userInfo;\r\n      const { data: res } = await this.$http.get(\"roles\");\r\n      if (res.meta.status != 200)\r\n        return this.$message.error(\"获取角色列表失败\");\r\n      this.rolesList = res.data;\r\n    },\r\n    async saveRole(){\r\n      if(this.selectedRoleId == ''){\r\n        //说明用户没有选择角色\r\n        return this.$message.error('请选择角色')\r\n      }\r\n      const {data:res} = await this.$http.put(`users/${this.userInfo.id}/role`,{rid:this.selectedRoleId})\r\n      if(res.meta.status != 200)return this.$message.error('修改角色失败')\r\n      this.getUserList()\r\n      this.roleDialogVisible = false\r\n      this.selectedRoleId = ''//重置选择器\r\n      this.userInfo = {}\r\n    }\r\n  }\r\n};\r\n\r\n// 404 url地址写错\r\n</script>\r\n<style scoped lang=\"less\">\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Users.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Users.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Users.vue?vue&type=template&id=41afadce&scoped=true&\"\nimport script from \"./Users.vue?vue&type=script&lang=js&\"\nexport * from \"./Users.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"41afadce\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}