(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-23c732b6"],{"0539":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:"/home"}},[t._v("首页")]),r("el-breadcrumb-item",[t._v("权限管理")]),r("el-breadcrumb-item",[t._v("角色列表")])],1),r("el-button",{attrs:{type:"primary"}},[t._v("添加角色")]),r("el-table",{attrs:{data:t.rolesList,border:"",stripe:""}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.children,(function(n){return r("el-row",{key:n.id,staticClass:"level_one"},[r("el-col",{attrs:{span:5}},[r("el-tag",[t._v(t._s(n.authName))]),r("i",{staticClass:"el-icon-caret-right"})],1),r("el-col",{attrs:{span:19}},t._l(n.children,(function(n){return r("el-row",{key:n.id},[r("el-col",{attrs:{span:5}},[r("el-tag",{attrs:{type:"success"}},[t._v(t._s(n.authName))]),r("i",{staticClass:"el-icon-caret-right"})],1),r("el-col",{attrs:{span:19}},t._l(n.children,(function(n){return r("el-tag",{key:n.id,attrs:{closable:"",type:"danger"},on:{close:function(r){return t.removeRightsById(e.row.id,n.id)}}},[t._v(t._s(n.authName))])})),1)],1)})),1)],1)}))}}])}),r("el-table-column",{attrs:{type:"index"}}),r("el-table-column",{attrs:{label:"角色名称",prop:"roleName"}}),r("el-table-column",{attrs:{label:"角色描述",prop:"roleDesc"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"}}),r("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"}}),r("el-button",{attrs:{size:"mini",type:"warning",icon:"el-icon-setting"},on:{click:function(r){return t.showSetDialog(e.row)}}})]}}])})],1),r("el-dialog",{attrs:{title:"分配权限",visible:t.rightDialogVisible,width:"50%"},on:{"update:visible":function(e){t.rightDialogVisible=e}}},[r("el-tree",{ref:"mytree",attrs:{"node-key":"id","default-checked-keys":t.defKeys,"show-checkbox":"","default-expand-all":"",data:t.rightsList,props:t.defaultProps}}),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.rightDialogVisible=!1}}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:t.allocateRights}},[t._v("确 定")])],1)],1)],1)},a=[],i=(r("99af"),r("4160"),r("a15b"),r("159b"),r("1316")),o=r.n(i);function s(t){if(o()(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}var c=r("a06f"),l=r.n(c),u=r("2dc0"),f=r.n(u);function h(t){if(f()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return l()(t)}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function p(t){return s(t)||h(t)||d()}r("96cf");var b=r("89ba"),g={created:function(){this.getRolesList()},data:function(){return{rolesList:[],rightDialogVisible:!1,rightsList:[],defaultProps:{children:"children",label:"authName"},defKeys:[],roleId:""}},methods:{getRolesList:function(){var t=Object(b["a"])(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get("roles");case 2:if(e=t.sent,r=e.data,200==r.meta.status){t.next=6;break}return t.abrupt("return",this.$message.error("获取角色列表失败"));case 6:this.rolesList=r.data;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),removeRightsById:function(t,e){var r=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(b["a"])(regeneratorRuntime.mark((function n(){var a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,r.$http.delete("roles/".concat(t,"/rights/").concat(e));case 2:if(a=n.sent,i=a.data,200==i.meta.status){n.next=6;break}return n.abrupt("return",r.$message.error("删除权限失败"));case 6:r.getRolesList();case 7:case"end":return n.stop()}}),n)})))).catch((function(){r.$message({type:"info",message:"已取消删除"})}))},showSetDialog:function(){var t=Object(b["a"])(regeneratorRuntime.mark((function t(e){var r,n,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=function(t){t.children.forEach((function(t){t.children?n(t):r.push(t.id)}))},this.roleId=e.id,r=[],n(e),this.defKeys=r,t.next=7,this.$http.get("rights/tree");case 7:if(a=t.sent,i=a.data,200==i.meta.status){t.next=11;break}return t.abrupt("return",this.$message.error("请求权限数据失败"));case 11:this.rightsList=i.data,this.rightDialogVisible=!0;case 13:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),allocateRights:function(){var t=Object(b["a"])(regeneratorRuntime.mark((function t(){var e,r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=[].concat(p(this.$refs.mytree.getCheckedKeys()),p(this.$refs.mytree.getHalfCheckedKeys())),r=e.join(","),t.next=4,this.$http.post("roles/".concat(this.roleId,"/rights"),{rids:r});case 4:if(n=t.sent,a=n.data,200==a.meta.status){t.next=8;break}return t.abrupt("return",this.$message.error("分配权限失败"));case 8:this.getRolesList(),this.rightDialogVisible=!1;case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},m=g,v=(r("802a"),r("2877")),y=Object(v["a"])(m,n,a,!1,null,"1ad7b9dc",null);e["default"]=y.exports},1316:function(t,e,r){t.exports=r("9cd3")},1575:function(t,e,r){},"159b":function(t,e,r){var n=r("da84"),a=r("fdbc"),i=r("17c2"),o=r("9112");for(var s in a){var c=n[s],l=c&&c.prototype;if(l&&l.forEach!==i)try{o(l,"forEach",i)}catch(u){l.forEach=i}}},"17c2":function(t,e,r){"use strict";var n=r("b727").forEach,a=r("b301");t.exports=a("forEach")?function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}:[].forEach},"2dc0":function(t,e,r){t.exports=r("588c")},4160:function(t,e,r){"use strict";var n=r("23e7"),a=r("17c2");n({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},"471b":function(t,e,r){"use strict";var n=r("194a"),a=r("4fff"),i=r("faaa"),o=r("2616"),s=r("6725"),c=r("6c15"),l=r("0b7b");t.exports=function(t){var e,r,u,f,h,d=a(t),p="function"==typeof this?this:Array,b=arguments.length,g=b>1?arguments[1]:void 0,m=void 0!==g,v=0,y=l(d);if(m&&(g=n(g,b>2?arguments[2]:void 0,2)),void 0==y||p==Array&&o(y))for(e=s(d.length),r=new p(e);e>v;v++)c(r,v,m?g(d[v],v):d[v]);else for(f=y.call(d),h=f.next,r=new p;!(u=h.call(f)).done;v++)c(r,v,m?i(f,g,[u.value,v],!0):u.value);return r.length=v,r}},"484e":function(t,e,r){var n=r("a5eb"),a=r("471b"),i=r("7de7"),o=!i((function(t){Array.from(t)}));n({target:"Array",stat:!0,forced:o},{from:a})},"588c":function(t,e,r){r("5145"),r("3e47"),t.exports=r("59d7")},"59d7":function(t,e,r){var n=r("8f95"),a=r("0363"),i=r("7463"),o=a("iterator");t.exports=function(t){var e=Object(t);return void 0!==e[o]||"@@iterator"in e||i.hasOwnProperty(n(e))}},"5ab9":function(t,e,r){r("e519");var n=r("764b");t.exports=n.Array.isArray},6220:function(t,e,r){var n=r("fc48");t.exports=Array.isArray||function(t){return"Array"==n(t)}},"6c15":function(t,e,r){"use strict";var n=r("7168"),a=r("4180"),i=r("2c6c");t.exports=function(t,e,r){var o=n(e);o in t?a.f(t,o,i(0,r)):t[o]=r}},"74e7":function(t,e,r){t.exports=r("bc59")},"802a":function(t,e,r){"use strict";var n=r("1575"),a=r.n(n);a.a},"9cd3":function(t,e,r){t.exports=r("5ab9")},a06f:function(t,e,r){t.exports=r("74e7")},a15b:function(t,e,r){"use strict";var n=r("23e7"),a=r("44ad"),i=r("fc6a"),o=r("b301"),s=[].join,c=a!=Object,l=o("join",",");n({target:"Array",proto:!0,forced:c||l},{join:function(t){return s.call(i(this),void 0===t?",":t)}})},b301:function(t,e,r){"use strict";var n=r("d039");t.exports=function(t,e){var r=[][t];return!r||!n((function(){r.call(null,e||function(){throw 1},1)}))}},bc59:function(t,e,r){r("3e47"),r("484e");var n=r("764b");t.exports=n.Array.from},e519:function(t,e,r){var n=r("a5eb"),a=r("6220");n({target:"Array",stat:!0},{isArray:a})},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-23c732b6.3ccaf7ef.js.map