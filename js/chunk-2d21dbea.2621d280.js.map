{"version":3,"sources":["webpack:///./src/components/product/Categories.vue?1349","webpack:///src/components/product/Categories.vue","webpack:///./src/components/product/Categories.vue?40c8","webpack:///./src/components/product/Categories.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","_v","on","addCate","cateList","columns","scopedSlots","_u","key","fn","scope","row","cat_deleted","staticClass","staticStyle","cat_level","queryInfo","pagenum","pagesize","total","handleSizeChange","handleCurrentChange","addCateDialogVisible","$event","resetCateForm","ref","addCateForm","addCateFormRules","model","value","callback","$$v","$set","expression","parentCateList","expandTrigger","label","checkStrictly","cascaderChange","selectedKeys","slot","saveCate","staticRenderFns","created","getCateList","data","type","cat_name","cat_pid","methods","console","log","getParentsCateList","length","$refs","addCateFormRef","resetFields","component"],"mappings":"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","file":"js/chunk-2d21dbea.2621d280.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":\"/home\"}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"商品管理\")]),_c('el-breadcrumb-item',[_vm._v(\"商品分类\")])],1),_c('el-card',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addCate}},[_vm._v(\"添加分类\")]),_c('tree-table',{attrs:{\"data\":_vm.cateList,\"columns\":_vm.columns,\"expand-type\":false,\"selection-type\":false,\"border\":\"\",\"stripe\":\"\",\"show-index\":\"\",\"index-text\":\"#\"},scopedSlots:_vm._u([{key:\"isDeleted\",fn:function(scope){return [(scope.row.cat_deleted==false)?_c('i',{staticClass:\"el-icon-success\",staticStyle:{\"color\":\"green\"}}):_c('i',{staticClass:\"el-icon-error\",staticStyle:{\"color\":\"red\"}})]}},{key:\"level\",fn:function(scope){return [(scope.row.cat_level==0)?_c('el-tag',{attrs:{\"size\":\"mini\"}},[_vm._v(\"一级\")]):(scope.row.cat_level==1)?_c('el-tag',{attrs:{\"type\":\"success\",\"size\":\"mini\"}},[_vm._v(\"二级\")]):_c('el-tag',{attrs:{\"type\":\"info\",\"size\":\"mini\"}},[_vm._v(\"三级\")])]}},{key:\"option\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\",\"icon\":\"el-icon-edit\"}},[_vm._v(\"编辑\")]),_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"mini\",\"icon\":\"el-icon-delete\"}},[_vm._v(\"删除\")])]}}])}),_c('el-pagination',{attrs:{\"current-page\":_vm.queryInfo.pagenum,\"page-sizes\":[1,2,3,4],\"page-size\":_vm.queryInfo.pagesize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1),_c('el-dialog',{attrs:{\"title\":\"提示\",\"visible\":_vm.addCateDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.addCateDialogVisible=$event},\"close\":_vm.resetCateForm}},[_c('el-form',{ref:\"addCateFormRef\",attrs:{\"model\":_vm.addCateForm,\"rules\":_vm.addCateFormRules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"分类名称\",\"prop\":\"cat_name\"}},[_c('el-input',{model:{value:(_vm.addCateForm.cat_name),callback:function ($$v) {_vm.$set(_vm.addCateForm, \"cat_name\", $$v)},expression:\"addCateForm.cat_name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"父级分类\"}},[_c('el-cascader',{attrs:{\"options\":_vm.parentCateList,\"props\":{ expandTrigger: 'hover',label:'cat_name',value:'cat_id',checkStrictly:true },\"clearable\":\"\"},on:{\"change\":_vm.cascaderChange},model:{value:(_vm.selectedKeys),callback:function ($$v) {_vm.selectedKeys=$$v},expression:\"selectedKeys\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.addCateDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.saveCate}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item to=\"/home\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>商品管理</el-breadcrumb-item>\r\n      <el-breadcrumb-item>商品分类</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n    <el-card>\r\n      <!-- <pre>\r\n        {{cateList}}\r\n      </pre>-->\r\n      <el-button type=\"primary\" @click=\"addCate\">添加分类</el-button>\r\n      <tree-table\r\n        :data=\"cateList\"\r\n        :columns=\"columns\"\r\n        :expand-type=\"false\"\r\n        :selection-type=\"false\"\r\n        border\r\n        stripe\r\n        show-index\r\n        index-text=\"#\"\r\n      >\r\n        <template slot=\"isDeleted\" slot-scope=\"scope\">\r\n          <i class=\"el-icon-success\" style=\"color:green;\" v-if=\"scope.row.cat_deleted==false\"></i>\r\n          <i class=\"el-icon-error\" style=\"color:red;\" v-else></i>\r\n        </template>\r\n        <template slot=\"level\" slot-scope=\"scope\">\r\n          <el-tag size=\"mini\" v-if=\"scope.row.cat_level==0\">一级</el-tag>\r\n          <el-tag type=\"success\" size=\"mini\" v-else-if=\"scope.row.cat_level==1\">二级</el-tag>\r\n          <el-tag type=\"info\" size=\"mini\" v-else>三级</el-tag>\r\n        </template>\r\n        <template slot=\"option\" slot-scope=\"scope\">\r\n          <el-button type=\"primary\" size=\"mini\" icon=\"el-icon-edit\">编辑</el-button>\r\n          <el-button type=\"danger\" size=\"mini\" icon=\"el-icon-delete\">删除</el-button>\r\n        </template>\r\n      </tree-table>\r\n      <el-pagination\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page=\"queryInfo.pagenum\"\r\n        :page-sizes=\"[1,2,3,4]\"\r\n        :page-size=\"queryInfo.pagesize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"total\"\r\n      ></el-pagination>\r\n    </el-card>\r\n    <!-- 添加分类对话框 -->\r\n    <el-dialog title=\"提示\" :visible.sync=\"addCateDialogVisible\" width=\"50%\" @close=\"resetCateForm\">\r\n      <el-form\r\n        :model=\"addCateForm\"\r\n        :rules=\"addCateFormRules\"\r\n        ref=\"addCateFormRef\"\r\n        label-width=\"100px\"\r\n      >\r\n        <el-form-item label=\"分类名称\" prop=\"cat_name\">\r\n          <el-input v-model=\"addCateForm.cat_name\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"父级分类\">\r\n          <el-cascader\r\n            v-model=\"selectedKeys\"\r\n            :options=\"parentCateList\"\r\n            :props=\"{ expandTrigger: 'hover',label:'cat_name',value:'cat_id',checkStrictly:true }\"\r\n           clearable @change=\"cascaderChange\"></el-cascader>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"addCateDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"saveCate\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  created() {\r\n    this.getCateList();\r\n  },\r\n  data() {\r\n    return {\r\n      queryInfo: {\r\n        type: 3,\r\n        pagenum: 1,\r\n        pagesize: 2\r\n      },\r\n      cateList: [],\r\n      total: 0, //总条数\r\n      columns: [\r\n        {\r\n          prop: \"cat_name\",\r\n          label: \"分类名称\"\r\n        },\r\n        {\r\n          prop: \"cat_deleted\",\r\n          label: \"是否有效\",\r\n          type: \"template\", //表示当前这一列是自定义模板列\r\n          template: \"isDeleted\" //具名slot\r\n        },\r\n        {\r\n          prop: \"cat_level\",\r\n          label: \"排序\",\r\n          type: \"template\", //表示当前这一列是自定义模板列\r\n          template: \"level\" //具名slot\r\n        },\r\n        {\r\n          label: \"操作\",\r\n          type: \"template\", //表示当前这一列是自定义模板列\r\n          template: \"option\" //具名slot\r\n        }\r\n      ],\r\n      addCateDialogVisible: false,\r\n      addCateForm: {\r\n        cat_name: \"\",\r\n        cat_pid: 0, //parent id父级的id\r\n        cat_level: 0\r\n      },\r\n      addCateFormRules: {\r\n        cat_name: [\r\n          { required: true, message: \"分类名称不能为空\", trigger: \"blur\" },\r\n          { min: 3, max: 15, message: \"长度在3到15之间\", trigger: \"blur\" }\r\n        ]\r\n      },\r\n      parentCateList: [],\r\n      selectedKeys:[],//接收用户选择好的级联值\r\n    };\r\n  },\r\n  methods: {\r\n    async getCateList() {\r\n      // get,delete - axios语法\r\n      const { data: res } = await this.$http.get(\"categories\", {\r\n        params: this.queryInfo\r\n      });\r\n      if (res.meta.status != 200) return this.$message.error(\"获取列表失败\");\r\n      this.cateList = res.data.result;\r\n      this.total = res.data.total;\r\n    },\r\n    handleSizeChange(pagesize) {\r\n      console.log(pagesize);\r\n      this.queryInfo.pagesize = pagesize;\r\n      this.getCateList();\r\n    },\r\n    handleCurrentChange(pagenum) {\r\n      console.log(pagenum);\r\n      this.queryInfo.pagenum = pagenum;\r\n      this.getCateList();\r\n    },\r\n    addCate() {\r\n      this.addCateDialogVisible = true;\r\n      this.getParentsCateList();\r\n    },\r\n    //请求父级分类的数据\r\n    async getParentsCateList() {\r\n      const { data: res } = await this.$http.get(\"categories\", {\r\n        params: { type: 2 }\r\n      });\r\n      if (res.meta.status != 200) return this.$message.error(\"获取失败\");\r\n      this.parentCateList = res.data;\r\n      console.log(this.parentCateList);\r\n    },\r\n    cascaderChange(){\r\n      // 3种情况\r\n      // 1. 什么也没选\r\n      // console.log(this.selectedKeys)\r\n      if(this.selectedKeys.length == 0){\r\n        //当前要添加的是一级分类\r\n        this.addCateForm.cat_pid = 0\r\n      }else{\r\n        this.addCateForm.cat_pid = this.selectedKeys[this.selectedKeys.length-1]\r\n      }\r\n      this.addCateForm.cat_level = this.selectedKeys.length\r\n    },\r\n    resetCateForm(){\r\n      this.$refs.addCateFormRef.resetFields()\r\n      this.selectedKeys = []\r\n      this.addCateForm.cat_pid = 0\r\n      this.addCateForm.cat_level = 0\r\n    },\r\n    async saveCate(){\r\n      const {data:res} = await this.$http.post('categories',this.addCateForm)\r\n      //响应拦截器\r\n      if(res.meta.status != 201)return this.$message.error('添加失败')\r\n      this.getCateList()\r\n      this.addCateDialogVisible = false\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style scoped lang=\"less\">\r\n</style>\r\n\r\n<style lang=\"less\">\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Categories.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Categories.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Categories.vue?vue&type=template&id=3fd75a09&scoped=true&\"\nimport script from \"./Categories.vue?vue&type=script&lang=js&\"\nexport * from \"./Categories.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3fd75a09\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}